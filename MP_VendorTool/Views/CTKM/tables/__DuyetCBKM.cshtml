@using System.Data

<div class="table-responsive">
    <table id="tbl_Item_Duyet" class="table table-bordered" style=" width:100%">
        <thead>
            <tr>
                <th scope="col" style="text-align: left; width: 85px; max-width: 85px; ">
                    Mã CTKM
                </th>
                <th scope="col" style="text-align: left; width: 350px; max-width: 350px; ">
                    Tên CTKM
                </th>
                <th scope="col" style="text-align: left; width: 85px; max-width: 85px; ">
                    SL <br />hàng mua
                </th>
                <th scope="col" style="text-align: left; width: 120px; max-width: 120px; ">
                    Tổng tiền<br /> hàng mua
                </th>
                <th scope="col" style="text-align: left; width: 120px; max-width: 120px; ">
                    Tổng % quà
                </th>
                <th scope="col" style="text-align: left; width: 120px; max-width: 120px; ">
                    SL <br />hàng tặng
                </th>
                <th scope="col" style="text-align: left; width: 120px; max-width: 120px; ">
                    Tổng giá<br /> trị quà
                </th>
                <th scope="col" style="text-align: left; width: 120px; max-width: 120px; ">
                    Từ ngày
                </th>
                <th scope="col" style="text-align: left; width: 120px; max-width: 120px; ">
                    Đến ngày
                </th>
                <th scope="col" style="text-align: left; width: 120px; max-width: 120px; ">
                    Ngày tạo
                </th>
                <th scope="col" style="text-align: left; width: 120px; max-width: 120px; ">
                    Ngày duyệt
                </th>
                <th scope="col" style="text-align: left; width: 120px; max-width: 120px; ">
                    Trạng thái
                </th>
                <th scope="col" style="text-align: left; width: 120px; max-width: 120px; ">
                    Chi tiết
                </th>
                <th scope="col" style="text-align: center; width: 120px; max-width: 120px; ">
                    Chọn  <br />  <input type="checkbox" id="checkall" value="" onchange="checkall();"/>
                </th>
            </tr>
        </thead>
        <tbody>
            @{
                if (Model != null)
                {
                    var dt = Model as DataTable;
                    if (dt.Rows.Count > 0)
                    {
                        var i = 0;
                        foreach (DataRow item in dt.Rows)
                        {
                            var k = i;
                            <tr style=" height:20px" id="Row_@i">
                                <td>
                                    @item["MaCTKM"]
                                </td>
                                <td>
                                    @item["TenCTKM"]
                                </td>
                                <td style="text-align: center">
                                    @item["tongSLMua"]
                                </td>
                                <td style="text-align:center">
                                    @item["tongTienMua"]
                                </td>
                                <td style="text-align: center">
                                    @item["tongPTMua"]
                                </td>
                                <td style="text-align: center">
                                    @item["tongSLTang"]
                                </td>
                                <td style="text-align: center">
                                    @item["tongTienTang"]
                                </td>
                                <td style="text-align: center">
                                    @item["FromDate"]
                                </td>
                                <td style="text-align: center">
                                    @item["ToDate"]
                                </td>
                                <td style="text-align: center">
                                    @item["CreateDate"]
                                </td>
                                <td style="text-align: center">
                                    @item["ApprovalDate"]
                                </td>
                                <td style="text-align: center">
                                    @Html.Raw(item["Status"])
                                </td>
                                <td style="text-align: center">
                                    <a onclick="js_showpopup('@item["MaCTKM"]','@item["TenCTKM"]','@item["FromDate"]','@item["ToDate"]','@item["TrangThai"]')" style="color:#fff" class="btn btn-primary btn-xs">Chi tiết</a>
                                </td>
                                <td style="text-align: center">
                                    @if (@item["TrangThai"].ToString() == "3" || @item["TrangThai"].ToString() == "2")
                                    {
                                        <input type="checkbox" disabled id="_@i" onchange="" name="checkno[]" value="@item["ID"]" />
                                    }
                                    else
                                    {
                                        <input type="checkbox" id="_@i" onchange="" name="check[]" value="@item["ID"]" />
                                    }
                                </td>
                            </tr>
                            i++;
                        }
                    }
                }
            }
        </tbody>
        <tfoot>
        </tfoot>
    </table>
</div>
<style>
    NgayTraHang input[type=date] {
        text-align: left;
        padding: 4px 2px;
    }
</style>

<script>
    function checkall() {
        var cboxes = document.getElementsByName('check[]');
        for (var i = 0; i < cboxes.length; i++) {
            if ($('#checkall').is(":checked")) {
                cboxes[i].checked = true;
            } else { cboxes[i].checked = false; }
        }
    }
</script>