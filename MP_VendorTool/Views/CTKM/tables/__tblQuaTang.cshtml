@using System.Data;
@using ProductAllTool.Models.ManageSales;
<link href="~/Content/css/thickbox.css" rel="stylesheet" />
<script src="~/Scripts/thickbox.js"></script>
<table id="tbl_Item_HangTang" class="table table-bordered tb_detail" style="border:none !important">
    <thead>
        <tr>
            <th>
                Tặng hàng
            </th>
            <th>
            </th>
            <th>
                <span id="tongtang"></span>
            </th>
            <th>
            </th>
            <th>
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th>
                Mã hàng
            </th>
            <th>
                Tên hàng
            </th>
            <th>
                Giá quà
            </th>
            <th>
                SL áp dụng
            </th>
            <th>
                SL áp dụng
            </th>
        </tr>
        @{
            if (Model != null)
            {
                var dt = Model as DataTable;
                if (dt.Rows.Count > 0)
                {
                    var i = 0;
                    foreach (DataRow item in dt.Rows)
                    {
                        <tr id="row_@i">
                            <td class="text-left" style="width:65px; max-width: 65px;  overflow: hidden;white-space: nowrap" id="masp_@i">
                                <span id="MaHang_tang">@item["MaHang"]</span>
                            </td>
                            <td class="text-left" style="width: 100px; max-width: 100px;  overflow: hidden;white-space: nowrap">
                                <span id="TenHang_tang"> @item["TenHang"]</span>
                            </td>
                            <td class="text-right" style="width: 100px; max-width: 100px;  overflow: hidden;white-space: nowrap">
                                <span id="GiaTang">@item["DonGia"]</span>
                            </td>
                            <td class="text-right" style="width: 100px; max-width: 100px;  overflow: hidden;white-space: nowrap">
                                <input type="number" id="sltang" class="form-control" onchange="checktang(@i)"/>
                            </td>
                            <td class="text-right SoTrung" style="width: 100px; max-width: 100px;  overflow: hidden;white-space: nowrap">
                                <input type="checkbox" id="_@i" name="check3[]" value="@item["ID"]"/>
                            </td>
                        </tr>
                        i++;
                    }
                }
            }
        }
    </tbody>
</table>
<script>
    function checktang(r) {
        // $('#_0').filter(':checkbox').prop('checked', true);
        var SLTang = $('#sltang').val();
        if (SLTang.length != 0) {
            $('.SoTrung #_' + r).filter(':checkbox').prop('checked', true);
        } else {
            $('.SoTrung  #_' + r).filter(':checkbox').prop('checked', false);
        }
        TongTangHang();
    }
</script>