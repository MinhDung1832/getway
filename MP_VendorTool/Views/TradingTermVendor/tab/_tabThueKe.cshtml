@using MP_VendorTool.Common
@using MP_VendorTool.Models.Order
@using MP_VendorTool.Models.TradingTermVendor
<style>
    /*    table#table_hangthuekes tbody {
        display: block;
        max-height: 500px;
        overflow-y: scroll;
        width: 101.5%;
    }
    table#table_hangthuekes thead, table#table_hangthuekes tbody tr {
        display: table;
        width: 100%;
        table-layout: fixed;
    }*/
</style>



<div>
    <div class="box_tab_1">
        <div class="row">
            <div class="col-md-2">
                <h5>Chiết khấu</h5>
            </div>
            <div class="col-md-10">
                <div class="row">
                    <div class="col-md-5">
                        <table class="table table-bordered" id="table_thueke_chietkhau">
                            <thead>
                                <tr>
                                    <th scope="col">Loại chiết khấu</th>
                                    <th scope="col">Hình thức TT</th>
                                    <th scope="col">Giá trị CK</th>
                                    <th scope="col">% chiết khấu</th>
                                    <th scope="col">Giá trị đơn hàng tối đa</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr id="row_7">
                                    <th style=" width: 107px; ">
                                        <select class="form-control" name="typeDiscount">
                                            <option value="CK trực tiêp">CK trực tiêp</option>
                                            <option value="CK thu sau">CK thu sau</option>
                                            <option value="Khai trương">Khai trương</option>
                                            <option value="Hàng mới">Hàng mới</option>
                                        </select>
                                    </th>
                                    <th style=" width: 107px; ">
                                        <select class="form-control" name="HinhThucThanhToan">
                                            <option value="Price">Tiền</option>
                                            <option value="Products">Hàng hóa</option>
                                        </select>
                                    </th>
                                    <td><input type="text" name="discountAmount" class="form-control OrderValue" /></td>
                                    <td><input type="text" name="percent_Discount" class="form-control" /></td>
                                    <td><input type="text" name="OrderValue" class="form-control OrderValue" /></td>
                                </tr>
                                <tr id="row_8">
                                    <th style=" width: 107px; ">
                                        <select class="form-control" name="typeDiscount">
                                            <option value="CK trực tiêp">CK trực tiêp</option>
                                            <option value="CK thu sau">CK thu sau</option>
                                            <option value="Khai trương">Khai trương</option>
                                            <option value="Hàng mới">Hàng mới</option>
                                        </select>
                                    </th>
                                    <th style=" width: 107px; ">
                                        <select class="form-control" name="HinhThucThanhToan">
                                            <option value="Price">Tiền</option>
                                            <option value="Products">Hàng hóa</option>
                                        </select>
                                    </th>
                                    <td><input type="text" name="discountAmount" class="form-control OrderValue" /></td>
                                    <td><input type="text" name="percent_Discount" class="form-control" /></td>
                                    <td><input type="text" name="OrderValue" class="form-control OrderValue" /></td>
                                </tr>
                                <tr id="row_9">
                                    <th style=" width: 107px; ">
                                        <select class="form-control" name="typeDiscount">
                                            <option value="CK trực tiêp">CK trực tiêp</option>
                                            <option value="CK thu sau">CK thu sau</option>
                                            <option value="Khai trương">Khai trương</option>
                                            <option value="Hàng mới">Hàng mới</option>
                                        </select>
                                    </th>
                                    <th style=" width: 107px; ">
                                        <select class="form-control" name="HinhThucThanhToan">
                                            <option value="Price">Tiền</option>
                                            <option value="Products">Hàng hóa</option>
                                        </select>
                                    </th>
                                    <td><input type="text" name="discountAmount" class="form-control OrderValue" /></td>
                                    <td><input type="text" name="percent_Discount" class="form-control" /></td>
                                    <td><input type="text" name="OrderValue" class="form-control OrderValue" /></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="col-md-7">
                        <div class="row">
                            <div class="col-md-3">
                                <h5>Hàng tặng hàng</h5>
                            </div>
                            <div class="col-md-9">
                                <table class="table table-bordered" id="table_thueke_hangtang">
                                    <thead>
                                        <tr>
                                            <th scope="col">Số lượng mua</th>
                                            <th scope="col">Số lượng tặng</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr id="row_7">
                                            <td><input type="text" name="quantityBuy" class="form-control" /></td>
                                            <td><input type="text" name="orderQuantity" class="form-control" /></td>
                                        </tr>
                                        <tr id="row_8">
                                            <td><input type="text" name="quantityBuy" class="form-control" /></td>
                                            <td><input type="text" name="orderQuantity" class="form-control" /></td>
                                        </tr>
                                        <tr id="row_9">
                                            <td><input type="text" name="quantityBuy" class="form-control" /></td>
                                            <td><input type="text" name="orderQuantity" class="form-control" /></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <div class="box_tab_2 boxAn">

        <div class="row">
            <div class="col-md-2">
                <h5>Thưởng</h5>
            </div>
            <div class="col-md-10">
                <table class="table table-bordered" id="table_thuong_3">
                    <thead>
                        <tr>
                            <th scope="col" style=" width: 19%">Loại thưởng</th>
                            <th scope="col" style="width: 10% ">Mức DS từ</th>
                            <th scope="col" style="width: 10% ">Mức DS đến</th>
                            <th scope="col" style="width: 17% ">Điều kiện DS target</th>
                            <th scope="col" style="width: 17% ">Điều kiện DS tính thưởng</th>
                            <th scope="col" style="width: 10% ">% thưởng</th>
                            <th scope="col" style="width: 10% ">Giá trị thưởng</th>
                            <th scope="col" style="width: 13% ">Ghi chú</th>
                            <th scope="col" style="width: 7% ">Thêm</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>

                @*<datalist id="Thuong_datalist">
                        @if (ViewBag.list_Thuong != null)
                        {
                            foreach (objCombox box in (List<objCombox>)ViewBag.list_Thuong)
                            {
                                <option value="@box.Name" />
                            }
                        }
                    </datalist>*@
            </div>
        </div>

    </div>

    <div class="box_tab_3 boxAn">
        <div class="row">
            <div class="col-md-2">
                <h5>TRADE MARKETING</h5>
            </div>
            <div class="col-md-10">
                <table class="table table-bordered" id="table_trade_3">
                    <thead>
                        <tr>
                            <th scope="col" style="width: 330px;">Nội dung đầu tư</th>
                            <th scope="col">% đầu tư</th>
                            <th scope="col">Giá trị đầu tư</th>
                            <th scope="col"> Điều kiện</th>
                            <th scope="col">Điều kiện doanh số</th>
                            <th scope="col">Thêm</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>

            </div>
        </div>
    </div>

    <div class="box_tab_4 boxAn">
        <div class="row">
            <div class="col-md-2">
                <h5>
                    PHÁT TRIỂN THƯƠNG HIỆU
                </h5>
            </div>
            <div class="col-md-10">
                <table class="table table-bordered" id="table_thuonghieu_3">
                    <thead>
                        <tr>
                            <th scope="col" style="width: 330px;">Nội dung đầu tư</th>
                            <th scope="col">% đầu tư</th>
                            <th scope="col">Giá trị đầu tư</th>
                            <th scope="col"> Điều kiện</th>
                            <th scope="col">Điều kiện doanh số</th>
                            <th scope="col">Thêm</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>

    </div>

    <div class="box_tab_4 boxAn">
        <div class="row">
            <div class="col-md-2">
                <h5>
                    PHÁT TRIỂN KHÁCH HÀNG
                </h5>
            </div>
            <div class="col-md-10">
                <table class="table table-bordered" id="table_khachhang_3">
                    <thead>
                        <tr>
                            <th scope="col" style="width: 330px;">Nội dung đầu tư</th>
                            <th scope="col">% đầu tư</th>
                            <th scope="col">Giá trị đầu tư</th>
                            <th scope="col"> Điều kiện</th>
                            <th scope="col">Điều kiện doanh số</th>
                            <th scope="col">Thêm</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="box_tab_6 boxAn">
        <div class="row">
            <div class="col-md-2">
                <h5>
                    TĂNG CƯỜNG HỢP TÁC
                </h5>
            </div>
            <div class="col-md-10">

                <table class="table table-bordered" id="table_ChiPhiVanHanh3">
                    <thead>
                        <tr>
                            <th scope="col">
                                Nội dung đầu tư
                            </th>
                            <th scope="col">
                                % đầu tư
                            </th>
                            <th scope="col" style="width: 26%;">
                                Giá trị đầu tư
                            </th>
                            <th scope="col">
                                Điều kiện
                            </th>
                            <th scope="col">Điều kiện doanh số</th>
                            <th scope="col">Thêm</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="box_tab_6">
        <div class="row">
            <div class="col-md-2">
                <h5>
                    ĐỔI TRẢ HÀNG
                </h5>
            </div>
            <div class="col-md-10">
                <table class="table table-bordered" id="table_thueke_doitra">
                    <thead>
                        <tr>
                            <th scope="col" style="width: 19%;">Áp dụng đổi/trả đối với hàng hoá</th>
                            <th scope="col" style="width: 8%;">Đổi/Trả</th>
                            <th scope="col" style="width:18%;">
                                Thời hạn đổi trả <br />(… ngày kể từ ngày nhận hàng)
                            </th>
                            <th scope="col" style="width: 15%;">
                                Thời hạn thông báo <br />(Báo trước .. ngày)
                            </th>
                            <th scope="col" style="width: 10%;">Phạt chậm đổi trả (%)</th>
                            <th scope="col" style="width: 10%;">Ghi chú</th>
                            <th scope="col" style="width:8%;">Xác nhận đổi/trả</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (ViewBag.list_CO_RE_GO != null)
                        {
                            int j = 1;
                            foreach (objCONTENT_RETURNS_GOODS box in (List<objCONTENT_RETURNS_GOODS>)ViewBag.list_CO_RE_GO)
                            {
                                <tr id="row_@j">
                                    <td scope="row">
                                        @box.contentApply
                                    </td>
                                    <td>
                                        <select class="form-control valid" name="ddlDoiTraTK" aria-invalid="false">
                                            @if (ViewBag.list_DoiTraHang != null)
                                            {
                                                foreach (objCombox_DoiTra boc in (List<objCombox_DoiTra>)ViewBag.list_DoiTraHang)
                                                {
                                                    <option value="@boc.Name">@boc.Name</option>
                                                }
                                            }
                                        </select>
                                    </td>
                                    <td style="text-align:center">
                                        <input type="number" name="refundTermTK" id="refundTermTK" value="@box.refundTerm" class="form-control">
                                    </td>
                                    <td style="text-align:center">
                                        @if (box.contentApply.ToString() == "Hàng ngừng kinh doanh" || box.contentApply.ToString() == "Hàng cận/hết date")
                                        {
                                            <input type="number" name="BaoTruocNgayTK" id="BaoTruocNgayTK" value="30" class="form-control">
                                        }
                                        else
                                        {
                                            <input type="number" style="display:none" name="BaoTruocNgayTK" id="BaoTruocNgayTK" class="form-control">
                                        }
                                    </td>
                                    <td style="text-align:center">
                                        <input type="number" name="PenaltyTK" id="PenaltyTK" value="@box.Penalty" class="form-control">
                                    </td>
                                    <td style="text-align:center">
                                        <input type="text" name="ContenTK" id="ContenTK" class="form-control">
                                    </td>
                                    <td style="text-align:center">
                                        <input type="checkbox" class="form-check-input" checked name="checkDoiTraTK" value="@box.contentApply">
                                    </td>
                                </tr>
                                j++;
                            }
                        }

                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="box_tab_6">
        <div class="row">
            <div class="col-md-2">
                <h5>
                    THANH TOÁN
                </h5>
            </div>
            <div class="col-md-10">
                <table class="table table-bordered" id="table_thueke_thanhtoan">
                    <thead>
                        <tr>
                            @*<th scope="col">Loại đơn hàng</th>*@
                            <th scope="col">Kỳ thanh toán</th>
                            <th scope="col">
                                Vào ngày
                            </th>
                            <th scope="col">Và ngày</th>
                            <th scope="col">Áp dụng cho</th>
                            <th scope="col">Ghi chú</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr id="row_7">
                            @*<td scope="row">
                                    <select class="form-control" name="typeOrder">
                                        @if (ViewBag.list_LoaiDonHang != null)
                                        {
                                            <option value="">--Chọn loại đơn hàng--</option>
                                            foreach (objCombox box in (List<objCombox>)ViewBag.list_LoaiDonHang)
                                            {
                                                <option value="@box.Name">@box.Name</option>
                                            }
                                        }
                                    </select>
                                </td>*@
                            <td>
                                <select class="form-control" name="paymentPeriod">
                                    @if (ViewBag.list_KyThanhToan != null)
                                    {
                                        <option value="">--Chọn kỳ thanh toán--</option>
                                        foreach (objCombox box in (List<objCombox>)ViewBag.list_KyThanhToan)
                                        {
                                            <option value="@box.Name">@box.Name</option>
                                        }
                                    }
                                </select>
                            </td>
                            <td>
                                <input type="text" class="form-control" name="onDay" />
                            </td>
                            <td>
                                <input type="text" class="form-control" name="andDay" value="" />
                            </td>
                            <td style="text-align:left">
                                <select class="form-control" name="applyFor">
                                    @if (ViewBag.list_ApDung != null)
                                    {
                                        <option value="">--Chọn áp dụng--</option>
                                        foreach (objCombox box in (List<objCombox>)ViewBag.list_ApDung)
                                        {
                                            <option value="@box.Code">@box.Name</option>
                                        }
                                    }
                                </select>
                            </td>
                            <td>
                                <input type="text" class="form-control" name="Content" value="" />
                            </td>
                        </tr>
                        <tr id="row_8">
                            @*<td scope="row">
                                    <select class="form-control" name="typeOrder">

                                        @if (ViewBag.list_LoaiDonHang != null)
                                        {
                                            <option value="">--Chọn loại đơn hàng--</option>
                                            foreach (objCombox box in (List<objCombox>)ViewBag.list_LoaiDonHang)
                                            {
                                                <option value="@box.Name">@box.Name</option>
                                            }
                                        }
                                    </select>
                                </td>*@
                            <td>
                                <select class="form-control" name="paymentPeriod">
                                    @if (ViewBag.list_KyThanhToan != null)
                                    {
                                        <option value="">--Chọn kỳ thanh toán--</option>
                                        foreach (objCombox box in (List<objCombox>)ViewBag.list_KyThanhToan)
                                        {
                                            <option value="@box.Name">@box.Name</option>
                                        }
                                    }
                                </select>
                            </td>

                            <td>
                                <input type="text" class="form-control" name="onDay" />
                            </td>
                            <td>
                                <input type="text" class="form-control" name="andDay" value="" />
                            </td>
                            <td style="text-align:left">
                                <select class="form-control" name="applyFor">
                                    @if (ViewBag.list_ApDung != null)
                                    {
                                        <option value="">--Chọn áp dụng--</option>
                                        foreach (objCombox box in (List<objCombox>)ViewBag.list_ApDung)
                                        {
                                            <option value="@box.Code">@box.Name</option>
                                        }
                                    }
                                </select>
                            </td>
                            <td>
                                <input type="text" class="form-control" name="Content" value="" />
                            </td>
                        </tr>
                        <tr id="row_9">
                            @*<td scope="row">
                                <select class="form-control" name="typeOrder">

                                @if (ViewBag.list_LoaiDonHang != null)
                                {
                                    <option value="">--Chọn loại đơn hàng--</option>
                                    foreach (objCombox box in (List<objCombox>)ViewBag.list_LoaiDonHang)
                                    {
                                        <option value="@box.Name">@box.Name</option>
                                    }
                                }
                                </select>
                                </td>*@
                            <td>
                                <select class="form-control" name="paymentPeriod">
                                    @if (ViewBag.list_KyThanhToan != null)
                                    {
                                        <option value="">--Chọn kỳ thanh toán--</option>
                                        foreach (objCombox box in (List<objCombox>)ViewBag.list_KyThanhToan)
                                        {
                                            <option value="@box.Name">@box.Name</option>
                                        }
                                    }
                                </select>
                            </td>
                            <td>
                                <input type="text" class="form-control" name="onDay" />
                            </td>
                            <td>
                                <input type="text" class="form-control" name="andDay" value="" />
                            </td>
                            <td style="text-align:left">
                                <select class="form-control" name="applyFor">
                                    @if (ViewBag.list_ApDung != null)
                                    {
                                        <option value="">--Chọn áp dụng--</option>
                                        foreach (objCombox box in (List<objCombox>)ViewBag.list_ApDung)
                                        {
                                            <option value="@box.Code">@box.Name</option>
                                        }
                                    }
                                </select>
                            </td>
                            <td>
                                <input type="text" class="form-control" name="Content" value="" />
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>


    </div>

    <div class="box_tab_6 boxAn">
        <div class="row">
            <div class="col-md-2">
                <h5>
                    HỢP TÁC KHÁC
                </h5>
            </div>
            <div class="col-md-10">

                <div class="form-group row">
                    <label for="textkho" class="col-sm-2 col-form-label">
                        Nội dung 1
                    </label>
                    <div class="col-sm-12">
                        <input type="text" id="cooperate_thueke_content_1" class="form-control" />
                    </div>
                </div>
                <div class="form-group row">
                    <label for="textkho" class="col-sm-2 col-form-label">
                        Nội dung 2
                    </label>
                    <div class="col-sm-12">
                        <input type="text" id="cooperate_thueke_content_2" class="form-control" />
                    </div>
                </div>
                <div class="form-group row">
                    <label for="textkho" class="col-sm-2 col-form-label">
                        Nội dung 3
                    </label>
                    <div class="col-sm-12">
                        <input type="text" id="cooperate_thueke_content_3" class="form-control" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    var row_thuong_3 = 0;
    var row_trand_3 = 0;
    var row_thuonghieu_3 = 0;
    var row_khachhang_3 = 0;
    var Vanhanh3 = 0;
    var TTChung = 0;
    $(function () {
        js_addRowThuong_3();
        js_addChiPhiVanHanh3();
        js_addRowTrade_3('ra');
        js_addRowThuongHieu_3('ra');
        js_addRowKhachHang_3('ra');
        // js_addRowHangThueKes();
        js_add_TTChung();

    });

    function js_addRowThuong_3(r) {
        row_thuong_3++;

        var j = row_thuong_3 - 1;
        $("#row_thueke_thuong_" + j + " .btn_add").empty();
        $("#row_thueke_thuong_" + j + " .btn_add").html('<a href="javascript:void(0);" onclick="deleteRowThuong3(this);" class="btn_add"><i class="fa fa-trash" aria-hidden="true"></i></a>');
        $("#table_thuong_3 tbody").append('<tr id="row_thueke_thuong_' + row_thuong_3 + '"><td scope="row" style="text-align: center;"> <select class="form-control valid" name="bonusType" id="bonusType_' + row_thuong_3 + '" aria-invalid="false"> </select> </td><td><input type="text" id="salesLevel" name="salesLevel" class="form-control OrderValue" /></td><td><input type="text" id="salesLevelDen" name="salesLevelDen" class="form-control OrderValue" /></td><td><select class="form-control valid" name="salesConditions" id="salesConditions_' + row_thuong_3 + '" aria-invalid="false"> </select> </td><td><select class="form-control valid" name="DKDSTinhThuong" id="DKDSTinhThuong_' + row_thuong_3 + '" aria-invalid="false"> </select> </td><td><input type="text" id="discountPercent" name="discountPercent" class="form-control" /></td><td><input type="text" id="DiscountAmountNoVAT" name="DiscountAmountNoVAT" class="form-control" /></td><td style="text-align: center;"><input style=" background: none !important; border: none; " id="description" name="description" class="form-control valid" value="Truy thu thưởng nếu đạt doanh số lũy kế" title="Truy thu thưởng nếu đạt doanh số lũy kế" aria-invalid="false"></td><td style="text-align:center;width: 115px;" class="btn_add"><a href="javascript:void(0);" onclick="js_addRowThuong_3(' + row_thuong_3 + ');"><i class="fa fa-plus" aria-hidden="true"></i></a></td></tr>');
        SetselectThuong3(row_thuong_3);
        Setselect_Thuong3(row_thuong_3);
    }

    function js_addRowTrade_3(r) {
        row_trand_3++;

        var j = row_trand_3 - 1;
        $("#row_thueke_trade3_" + j + " .btn_add").empty();
        $("#row_thueke_trade3_" + j + " .btn_add").html('<a href="javascript:void(0);" onclick="deleteRowTrand_3(this);" class="btn_add"><i class="fa fa-trash" aria-hidden="true"></i></a>');
        $("#table_trade_3 tbody").append('<tr id="row_thueke_trade3_' + row_trand_3 + '"><td scope="row" style="text-align: center;"><select class="form-control valid" name="mktbonus_content_invest" id="mktbonus_content_invest_' + row_trand_3 + '" aria-invalid="false"> </select></td><td><input type="text" name="mktbonus_percent_invest" name="mktbonus_percent_invest" class="form-control" /></td><td><input type="text" name="mktbonus_invest_value" class="form-control OrderValue" /></td><td><input type="text" name="mktbonus_des" class="form-control" /></td><td><select class="form-control valid" name="salesConditions" id="salesConditions_' + row_trand_3 + '" aria-invalid="false"> </select> </td><td style="text-align:center;width: 115px;" class="btn_add"><a href="javascript:void(0);" onclick="js_addRowTrade_3(' + row_trand_3 + ');"><i class="fa fa-plus" aria-hidden="true"></i></a></td></tr>');
        Setselect_DieuKienDoanhSo_TradeTK(row_trand_3);
        SetselectTRADEMARKETING3(row_trand_3);
    }

    function js_addRowThuongHieu_3(r) {
        row_thuonghieu_3++;

        var j = row_thuonghieu_3 - 1;
        $("#row_thueke_thuonghieu3_" + j + " .btn_add").empty();
        $("#row_thueke_thuonghieu3_" + j + " .btn_add").html('<a href="javascript:void(0);" onclick="deleteRowThuongHieu_3(this);" class="btn_add"><i class="fa fa-trash" aria-hidden="true"></i></a>');
        $("#table_thuonghieu_3 tbody").append('<tr id="row_thueke_thuonghieu3_' + row_thuonghieu_3 + '"><td scope="row" style="text-align: center;"><select class="form-control valid" name="brandbonus_content_invest" id="brandbonus_content_invest_' + row_thuonghieu_3 + '" aria-invalid="false"> </select></td><td><input type="text" name="brandbonus_percent_invest" class="form-control" /></td><td><input type="text" name="brandbonus_invest_value" class="form-control OrderValue" /></td><td><input type="text" name="brandbonus_des" class="form-control" /></td><td><select class="form-control valid" name="salesConditions" id="salesConditions_' + row_thuonghieu_3 + '" aria-invalid="false"> </select> </td><td style="text-align:center;width: 115px;" class="btn_add"><a href="javascript:void(0);" onclick="js_addRowThuongHieu_3(' + row_thuonghieu_3 + ');"><i class="fa fa-plus" aria-hidden="true"></i></a></td></tr>');
        Setselect_DieuKienDoanhSo_ThuongHieuTK(row_thuonghieu_3);
        SetselectThuongHieu3(row_thuonghieu_3);
    }



    function js_addRowKhachHang_3(r) {
        row_khachhang_3++;

        var j = row_khachhang_3 - 1;
        $("#row_thueke_khachhang3_" + j + " .btn_add").empty();
        $("#row_thueke_khachhang3_" + j + " .btn_add").html('<a href="javascript:void(0);" onclick="deleteRowKhachHang_3(this);" class="btn_add"><i class="fa fa-trash" aria-hidden="true"></i></a>');
        $("#table_khachhang_3 tbody").append('<tr id="row_thueke_khachhang3_' + row_khachhang_3 + '"><td scope="row" style="text-align: center;"><select class="form-control valid" name="cusbonus_content_invest" id="cusbonus_content_invest_' + row_khachhang_3 + '" aria-invalid="false"> </select></td><td><input type="text" name="cusbonus_percent_invest" class="form-control" /><td><input type="text" name="cusbonus_invest_value" class="form-control OrderValue" /></td><td><input type="text" name="cusbonus_percent_des" class="form-control" /></td><td><select class="form-control valid" name="salesConditions" id="salesConditions_' + row_khachhang_3 + '" aria-invalid="false"> </select> </td><td style="text-align:center;width: 115px;" class="btn_add"><a href="javascript:void(0);" onclick="js_addRowKhachHang_3(' + row_khachhang_3 + ');"><i class="fa fa-plus" aria-hidden="true"></i></a></td></tr>');
        Setselect_DieuKienDoanhSo_PhatTrienKhachHangTK(row_khachhang_3);
        SetselectphattrienKH3(row_khachhang_3)
    }

    function js_addChiPhiVanHanh3(r) {
        Vanhanh3++;

        var chuoi = "";
        var CP3 = Vanhanh3 - 1;
        $("#rowChiPhiVanHanh3_" + CP3 + " .btn_add").empty();
        $("#rowChiPhiVanHanh3_" + CP3 + " .btn_add").html('<a href="javascript:void(0);" onclick="deleteRowChiPhiVanHanh3(this);" class="btn_add"><i class="fa fa-trash" aria-hidden="true"></i></a>');
        chuoi += '<tr id="rowChiPhiVanHanh3_' + Vanhanh3 + '">';
        chuoi += '<td><select class="form-control valid" name="NoiDungDauTu" id="NoiDungDauTu_' + Vanhanh3 + '" aria-invalid="false"> </select></td>';
        chuoi += '<td><input  type="text" name="PTDauTu" id="PTDauTu' + Vanhanh3 + '" class="form-control" /></td>';
        chuoi += '<td><input  type="text" name="GiaTriDauTu" id="GiaTriDauTu' + Vanhanh3 + '" class="form-control OrderValue" /></td>';
        chuoi += '<td><input  type="text" name="DieuKien" id="DieuKien' + Vanhanh3 + '" class="form-control" /></td>';
        chuoi += ' <td><select class="form-control valid" name="salesConditions" id="salesConditions_' + Vanhanh3 + '" aria-invalid="false"> </select> </td>';
        chuoi += '<td style="text-align:center" class="btn_add"><a href="javascript:void(0)" onclick="js_addChiPhiVanHanh3(' + Vanhanh3 + ');"><i class="fa fa-plus" aria-hidden="true"></i></a></td></tr > ';
        $("#table_ChiPhiVanHanh3 tbody").append(chuoi);
        Setselect_DieuKienDoanhSo_ChiPhiVanHanhTK(Vanhanh3);
        Setselect_ChiPhiVanHanh3(Vanhanh3);
    }

    function js_add_TTChung(r) {
        TTChung++;
        var chuoi = "";
        var TTC = TTChung - 1;
        $("#rowChiPhiTTChung_" + TTC + " .btn_add").empty();
        $("#rowChiPhiTTChung_" + TTC + " .btn_add").html('<a href="javascript:void(0);" onclick="deleteRowChiPhiTTChung(this);" class="btn_add"><i class="fa fa-trash" aria-hidden="true"></i></a>');
        chuoi += '<tr id="rowChiPhiTTChung_' + TTChung + '">';
        chuoi += '<td><input  type="text" name="SoCuaHangThue" class="form-control" /></td>';
        chuoi += '<td><input  type="text" name="SoThang" class="form-control" /></td>';
        chuoi += '<td><input  type="text" name="M2FThueCuaHang" class="form-control" /></td>';
        chuoi += '<td><input  type="text" name="ChiPhiThueThangVAT" class="form-control OrderValue" /></td>';
        chuoi += '<td><input  type="text" name="TongChiPhiThueThangVAT" class="form-control OrderValue" /></td>';
        chuoi += '<td><input  type="text" name="TongChiPhiThueNam" class="form-control OrderValue" /></td>';
        chuoi += '<td><input  type="text" name="DSCamKetCuaHang" class="form-control OrderValue" /></td>';
        chuoi += '<td><input type="search" class="form-control" id="Mien" name="Mien" list="Mien_datalist" placeholder="Nhập Miền"></td>';

        chuoi += '<td><input type="date" name="NgayKyHD" class="form-control" /></td>';
        chuoi += '<td><input  type="date" name="NgayHetHanHD" class="form-control" /></td>';
        chuoi += '<td><input  type="date" name="NgaybatDauThue" class="form-control" /></td>';
        chuoi += '<td><input  type="date" name="NgayDieuChinhKetThuc" class="form-control" /></td>';
        chuoi += '<td style="text-align:center;"><input type="checkbox" class="form-check-input" name="checkTuDongGiaHan" value=""></td>';
        chuoi += '<td style="text-align:center;display:none"><input type="checkbox" class="form-check-input" name="checkHieuLuc" value=""></td>';
        chuoi += '<td style="text-align:center; " class="btn_add"><a href="javascript:void(0)" onclick="js_add_TTChung(' + TTChung + ');"><i class="fa fa-plus" aria-hidden="true"></i></a></td></tr > ';
        $("#table_TTCChungThueKe tbody").append(chuoi);
    }

    function js_onchange_barcodeHangThueKe(r) {
        let nameProduct = String($('#row_hang_thue_ke_' + r + ' input[name="nameProductTK"]').val()).trim();

        $('#row_hang_thue_ke_' + r + '  #barcodehangthueke_' + r).empty();
        $('#row_hang_thue_ke_' + r + '  #M2FGrossSP_' + r).empty();
        $('#row_hang_thue_ke_' + r + ' #barcodehangthueke_' + r).append('<option value="">--Chọn Barcode--</option>');

        var item = nameProduct.split(" - ");
        if (nameProduct.length > 0) {
            $.ajax({
                url: '/TradingTermVendor/GetListBarcode',
                type: 'POST',
                data: JSON.stringify({ itemNo: item[0] }),
                contentType: 'application/json, charset=utf-8',
                success: function (data) {
                    var row = JSON.parse(data);
                    if (row != null) {
                        $('#row_hang_thue_ke_' + r + ' #barcodehangthueke_' + r).empty();
                        for (i in row) {
                            $('#row_hang_thue_ke_' + r + ' #barcodehangthueke_' + r).append('<option value="' + row[i].Code + '">' + row[i].Name + '</option>');
                        }
                    }
                }
            });

            //// Lấy ra M2FGrossSP
            //$.ajax({
            //    url: '/TradingTermVendor/Get_M2FGross_ThueKe',
            //    type: 'POST',
            //    data: JSON.stringify({ MaHang: item[0] }),
            //    contentType: 'application/json, charset=utf-8',
            //    success: function (data) {
            //        var row = JSON.parse(data);
            //        if (row != null) {
            //       $('#row_hang_thue_ke_' + r + ' #M2FGrossSP_' + r).empty();
            //        $('#row_hang_thue_ke_' + r + ' #M2FGrossSP_' + r).val('' + row[0].Name + '');
            //        }
            //    }
            //});
        }
    }

    function deleteRowChiPhiTTChung(r) {
        var ri = r.parentNode.parentNode.rowIndex;
        document.getElementById("table_TTCChungThueKe").deleteRow(ri);
    }

    function deleteRowHangThuKes(r) {
        var ri = r.parentNode.parentNode.rowIndex;
        document.getElementById("table_hangthuekes").deleteRow(ri);
    }

    function deleteRowFunctionThuKe(r) {
        var ri = r.parentNode.parentNode.rowIndex;
        document.getElementById("table_FunctionThueKe").deleteRow(ri);
    }

    function deleteRowBrandThueKe(r) {
        var ri = r.parentNode.parentNode.rowIndex;
        document.getElementById("table_BrandThueKe").deleteRow(ri);
    }

    function deleteRowChiPhiVanHanh3(r) {
        var ri = r.parentNode.parentNode.rowIndex;
        document.getElementById("table_ChiPhiVanHanh3").deleteRow(ri);
    }

    function deleteRowThuong3(r) {
        var ri = r.parentNode.parentNode.rowIndex;
        document.getElementById("table_thuong_3").deleteRow(ri);
    }

    function deleteRowTrand_3(r) {
        var ri3 = r.parentNode.parentNode.rowIndex;
        document.getElementById("table_trade_3").deleteRow(ri3);
    }

    function deleteRowThuongHieu_3(r) {
        var ri3 = r.parentNode.parentNode.rowIndex;
        document.getElementById("table_thuonghieu_3").deleteRow(ri3);
    }

    function deleteRowKhachHang_3(r) {
        var ri3 = r.parentNode.parentNode.rowIndex;
        document.getElementById("table_khachhang_3").deleteRow(ri3);
    }

    function SetselectThuong3(i) {
        $('#row_thueke_thuong_' + i + ' #bonusType_' + i + '').empty();
        $.ajax({
            url: '/TradingTermVendor/SetselectThuong',
            type: 'POST',
            contentType: 'application/json, charset=utf-8',
            success: function (data) {
                $.each(data, (index, value) => {
                    $('#row_thueke_thuong_' + i + '  #bonusType_' + i + '').append("<option value=\"" + value.Name + "\">" + value.Name + "</option>");
                });
            }
        });
    }

    function SetselectTRADEMARKETING3(i) {
        $('#row_thueke_trade3_' + i + ' #mktbonus_content_invest_' + i + '').empty();
        $.ajax({
            url: '/TradingTermVendor/SetselectTRADEMARKETING',
            type: 'POST',
            contentType: 'application/json, charset=utf-8',
            success: function (data) {
                $.each(data, (index, value) => {
                    $('#row_thueke_trade3_' + i + ' #mktbonus_content_invest_' + i + '').append("<option value=\"" + value.Name + "\">" + value.Name + "</option>");
                });
            }
        });
    }

    function SetselectThuongHieu3(i) {

        $('#row_thueke_thuonghieu3_' + i + ' #brandbonus_content_invest_' + i + '').empty();
        $.ajax({
            url: '/TradingTermVendor/SetselectThuongHieu',
            type: 'POST',
            contentType: 'application/json, charset=utf-8',
            success: function (data) {
                $.each(data, (index, value) => {
                    $('#row_thueke_thuonghieu3_' + i + ' #brandbonus_content_invest_' + i + '').append("<option value=\"" + value.Name + "\">" + value.Name + "</option>");
                });
            }
        });
    }

    function SetselectphattrienKH3(i) {

        $('#row_thueke_khachhang3_' + i + ' #cusbonus_content_invest_' + i + '').empty();
        $.ajax({
            url: '/TradingTermVendor/SetselectphattrienKH',
            type: 'POST',
            contentType: 'application/json, charset=utf-8',
            success: function (data) {
                $.each(data, (index, value) => {
                    $('#row_thueke_khachhang3_' + i + ' #cusbonus_content_invest_' + i + '').append("<option value=\"" + value.Name + "\">" + value.Name + "</option>");
                });
            }
        });
    }

    function Setselect_ChiPhiVanHanh3(i) {

        $('#rowChiPhiVanHanh3_' + i + ' #NoiDungDauTu_' + i + '').empty();
        $.ajax({
            url: '/TradingTermVendor/Setselect_ChiPhiVanHanh',
            type: 'POST',
            contentType: 'application/json, charset=utf-8',
            success: function (data) {
                $.each(data, (index, value) => {
                    $('#rowChiPhiVanHanh3_' + i + ' #NoiDungDauTu_' + i + '').append("<option value=\"" + value.Name + "\">" + value.Name + "</option>");
                });
            }
        });
    }

    function Setselect_Thuong3(i) {

        $('#row_thueke_thuong_' + i + ' #salesConditions_' + i + '').empty();
        $('#row_thueke_thuong_' + i + ' #DKDSTinhThuong_' + i + '').empty();
        $.ajax({
            url: '/TradingTermVendor/Setselect_Thuong',
            type: 'POST',
            contentType: 'application/json, charset=utf-8',
            success: function (data) {
                $.each(data, (index, value) => {
                    $('#row_thueke_thuong_' + i + ' #DKDSTinhThuong_' + i + '').append("<option value=\"" + value.Name + "\">" + value.Name + "</option>");
                    $('#row_thueke_thuong_' + i + ' #salesConditions_' + i + '').append("<option value=\"" + value.Name + "\">" + value.Name + "</option>");
                });
            }
        });
    }


    // News
    function Setselect_DieuKienDoanhSo_TradeTK(i) {

        $('#row_thueke_trade3_' + i + ' #salesConditions_' + i + '').empty();
        $.ajax({
            url: '/TradingTermVendor/Setselect_Thuong',
            type: 'POST',
            contentType: 'application/json, charset=utf-8',
            success: function (data) {
                $.each(data, (index, value) => {
                    $('#row_thueke_trade3_' + i + ' #salesConditions_' + i + '').append("<option value=\"" + value.Name + "\">" + value.Name + "</option>");
                });
            }
        });
    }

    function Setselect_DieuKienDoanhSo_ThuongHieuTK(i) {
        $('#row_thueke_thuonghieu3_' + i + ' #salesConditions_' + i + '').empty();
        $.ajax({
            url: '/TradingTermVendor/Setselect_Thuong',
            type: 'POST',
            contentType: 'application/json, charset=utf-8',
            success: function (data) {
                $.each(data, (index, value) => {
                    $('#row_thueke_thuonghieu3_' + i + ' #salesConditions_' + i + '').append("<option value=\"" + value.Name + "\">" + value.Name + "</option>");
                });
            }
        });
    }

    function Setselect_DieuKienDoanhSo_PhatTrienKhachHangTK(i) {
        $('#row_thueke_khachhang3_' + i + ' #salesConditions_' + i + '').empty();
        $.ajax({
            url: '/TradingTermVendor/Setselect_Thuong',
            type: 'POST',
            contentType: 'application/json, charset=utf-8',
            success: function (data) {
                $.each(data, (index, value) => {
                    $('#row_thueke_khachhang3_' + i + ' #salesConditions_' + i + '').append("<option value=\"" + value.Name + "\">" + value.Name + "</option>");
                });
            }
        });
    }
    function Setselect_DieuKienDoanhSo_ChiPhiVanHanhTK(i) {
        $('#rowChiPhiVanHanh3_' + i + ' #salesConditions_' + i + '').empty();
        $.ajax({
            url: '/TradingTermVendor/Setselect_Thuong',
            type: 'POST',
            contentType: 'application/json, charset=utf-8',
            success: function (data) {
                $.each(data, (index, value) => {
                    $('#rowChiPhiVanHanh3_' + i + ' #salesConditions_' + i + '').append("<option value=\"" + value.Name + "\">" + value.Name + "</option>");
                });
            }
        });
    }


</script>


