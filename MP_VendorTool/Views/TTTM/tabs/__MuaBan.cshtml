

<style>
    table#table_hanghoaMuaBan tbody {
        display: block;
        max-height: 500px;
        overflow-y: scroll;
        width: 101%;
    }

        table#table_hanghoaMuaBan thead, table#table_hanghoaMuaBan tbody tr {
            display: table;
            width: 100%;
            table-layout: fixed;
        }

    table#table_FunctionMuaBan tbody {
        display: block;
        max-height: 500px;
        overflow-y: scroll;
        width: 101%;
    }

        table#table_FunctionMuaBan thead, table#table_FunctionMuaBan tbody tr {
            display: table;
            width: 100%;
            table-layout: fixed;
        }

    table#table_BrandMuaBan tbody {
        display: block;
        max-height: 500px;
        overflow-y: scroll;
        width: 101%;
    }

        table#table_BrandMuaBan thead, table#table_BrandMuaBan tbody tr {
            display: table;
            width: 100%;
            table-layout: fixed;
        }
</style>



<div class="box_tab_1">
    <div class="row">
        <div class="col-md-2">
            <h5>Chiết khấu</h5>
        </div>
        <div class="col-md-10">
            <div class="row">
                <div class="col-md-5">
                    <table class="table table-bordered" id="table_chietkhau">
                        <thead>
                            <tr>
                                <th scope="col">Loại chiết khấu</th>
                                <th scope="col">Hình thức TT</th>
                                <th scope="col">Giá trị CK</th>
                                <th scope="col">% chiết khấu</th>
                                <th scope="col">Giá trị đơn hàng tối đa</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr id="row_1">
                                <th style=" width: 107px; ">
                                    <select class="form-control" name="typeDiscount">
                                        <option value="CK trực tiêp">CK trực tiêp</option>
                                        <option value="CK thu sau">CK thu sau</option>
                                        <option value="Khai trương">Khai trương</option>
                                        <option value="Hàng mới">Hàng mới</option>
                                    </select>
                                </th>
                                <th style=" width: 107px; ">
                                    <select class="form-control" name="HinhThucThanhToan">
                                        <option value="Price">Tiền</option>
                                        <option value="Products">Hàng hóa</option>
                                    </select>
                                </th>
                                <td><input type="text" name="discountAmount" class="form-control OrderValue" /></td>
                                <td><input type="text" name="percent_Discount" class="form-control" /></td>
                                <td><input type="text" name="OrderValue" class="form-control OrderValue" /></td>
                            </tr>
                            <tr id="row_2">
                                <th style=" width: 107px; ">
                                    <select class="form-control" name="typeDiscount">
                                        <option value="CK trực tiêp">CK trực tiêp</option>
                                        <option value="CK thu sau">CK thu sau</option>
                                        <option value="Khai trương">Khai trương</option>
                                        <option value="Hàng mới">Hàng mới</option>
                                    </select>
                                </th>
                                <th style=" width: 107px; ">
                                    <select class="form-control" name="HinhThucThanhToan">
                                        <option value="Price">Tiền</option>
                                        <option value="Products">Hàng hóa</option>
                                    </select>
                                </th>
                                <td><input type="text" name="discountAmount" class="form-control OrderValue" /></td>
                                <td><input type="text" name="percent_Discount" class="form-control" /></td>
                                <td><input type="text" name="OrderValue" class="form-control OrderValue" /></td>
                            </tr>
                            <tr id="row_3">
                                <th style=" width: 107px; ">
                                    <select class="form-control" name="typeDiscount">
                                        <option value="CK trực tiêp">CK trực tiêp</option>
                                        <option value="CK thu sau">CK thu sau</option>
                                        <option value="Khai trương">Khai trương</option>
                                        <option value="Hàng mới">Hàng mới</option>
                                    </select>
                                </th>
                                <th style=" width: 107px; ">
                                    <select class="form-control" name="HinhThucThanhToan">
                                        <option value="Price">Tiền</option>
                                        <option value="Products">Hàng hóa</option>
                                    </select>
                                </th>
                                <td><input type="text" name="discountAmount" class="form-control OrderValue" /></td>
                                <td><input type="text" name="percent_Discount" class="form-control" /></td>
                                <td><input type="text" name="OrderValue" class="form-control OrderValue" /></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-md-7">
                    <div class="row">
                        <div class="col-md-3">
                            <h5>Hàng tặng hàng</h5>
                        </div>
                        <div class="col-md-9">
                            <table class="table table-bordered" id="table_hangtang">
                                <thead>
                                    <tr>
                                        <th scope="col">Số lượng mua</th>
                                        <th scope="col">Số lượng tặng</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr id="row_1">
                                        <td><input type="text" name="quantityBuy" class="form-control" /></td>
                                        <td><input type="text" name="orderQuantity" class="form-control" /></td>
                                    </tr>
                                    <tr id="row_2">
                                        <td><input type="text" name="quantityBuy" class="form-control" /></td>
                                        <td><input type="text" name="orderQuantity" class="form-control" /></td>
                                    </tr>
                                    <tr id="row_3">
                                        <td><input type="text" name="quantityBuy" class="form-control" /></td>
                                        <td><input type="text" name="orderQuantity" class="form-control" /></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<div class="box_tab_2 boxAn">
    <div class="row">
        <div class="col-md-2">
            <h5>Thưởng</h5>
        </div>
        <div class="col-md-10">
            <table class="table table-bordered" id="table_thuong">
                <thead>
                    <tr>
                        <th scope="col" style=" width: 19%">Loại thưởng</th>
                        <th scope="col" style="width: 10% ">Mức DS từ</th>
                        <th scope="col" style="width: 10% ">Mức DS đến</th>
                        <th scope="col" style="width: 17% ">Điều kiện DS target</th>
                        <th scope="col" style="width: 17% ">Điều kiện DS tính thưởng</th>
                        <th scope="col" style="width: 10% ">% thưởng</th>
                        <th scope="col" style="width: 10% ">Giá trị thưởng</th>
                        <th scope="col" style="width: 13% ">Ghi chú</th>
                        <th scope="col" style="width: 7% ">Thêm</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>

            

        </div>
    </div>

</div>

<div class="box_tab_3 boxAn">
    <div class="row">
        <div class="col-md-2">
            <h5>TRADE MARKETING</h5>
        </div>
        <div class="col-md-10">
            <table class="table table-bordered" id="table_trade">
                <thead>
                    <tr>
                        <th scope="col" style="width: 330px;">Nội dung đầu tư</th>
                        <th scope="col">% đầu tư</th>
                        <th scope="col">Giá trị đầu tư</th>
                        <th scope="col">Điều kiện</th>
                        <th scope="col">Điều kiện doanh số</th>
                        <th scope="col">Thêm</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
           
        </div>
    </div>
</div>
<script>
    $(function () {
        js_addThuong();
        js_addTradeMark();
    });
    var CDFlash = 0;
    var CDFlashTrade = 0;

    function js_addThuong() {
        CDFlash++;
        var chuoi = "";
        var TTC = CDFlash - 1;
        $("#row_" + TTC + " .btn_add").empty();
        $("#row_" + TTC + " .btn_add").html('<a href="javascript:void(0);" onclick="deleteRow(this);" class="btn_add"><i class="fa fa-trash" aria-hidden="true"></i></a>');
        chuoi += '<tr id="row_' + CDFlash + '">';
        console.log(chuoi);

        chuoi += '<td><select id="LoaiThuong" class="form-control selectpicker" name="LoaiThuong" data-live-search="true">';
        chuoi += '<option value="">-- Loại thưởng --</option>';
        $.each(list_LoaiThuong, (index, value) => {
            chuoi += '<option value=' + value.Code + '>' + value.Name + '</option>';
        });
        chuoi += '</select></td>';

        chuoi += '<td><input class="form-control" type="number" id="MucDSTu" name="MucDSTu" value=""></td>';
        chuoi += '<td><input class="form-control" type="number" id="MucDSDen" name="MucDSDen" value=""></td>';

        chuoi += '<td><select id="DKDSTarget" class="form-control selectpicker" name="DKDSTarget" data-live-search="true">';
        chuoi += '<option value="">-- Điều kiện danh sách Target --</option>';
        $.each(list_DKDSTarget, (index, value) => {
            chuoi += '<option value=' + value.Code + '>' + value.Name + '</option>';
        });
        chuoi += '</select></td>';

        chuoi += '<td><select id="DKDSTinhThuong" class="form-control selectpicker" name="DKDSTinhThuong" data-live-search="true">';
        chuoi += '<option value="">-- Điều kiện DS tính thưởng --</option>';
        $.each(list_DKDSTinhThuong, (index, value) => {
            chuoi += '<option value=' + value.Code + '>' + value.Name + '</option>';
        });
        chuoi += '</select></td>';

        chuoi += '<td><input class="form-control" type="number" id="PTThuong" name="PTThuong" value=""></td>';
        chuoi += '<td><input class="form-control" type="number" id="GTThuong" name="GTThuong" value=""></td>';
        chuoi += '<td><input class="form-control" type="text" id="GhiChu" name="GhiChu" value=""></td>';

        chuoi += '<td style="text-align:center;" class="btn_add"><a class="add" href="javascript:void(0)" onclick="js_addThuong(' + CDFlash + ');"><i class="fa fa-plus" aria-hidden="true"></i></a></td></tr > ';
        $("#table_thuong tbody").append(chuoi);
        $('.selectpicker').selectpicker();
    }
    function js_addTradeMark() {
        CDFlashTrade++;
        var chuoi = "";
        var TTC = CDFlashTrade - 1;
        $("#row_" + TTC + " .btn_add1").empty();
        $("#row_" + TTC + " .btn_add1").html('<a href="javascript:void(0);" onclick="deleteRowTrade(this);" class="btn_add1"><i class="fa fa-trash" aria-hidden="true"></i></a>');
        chuoi += '<tr id="row_' + CDFlashTrade + '">';

        chuoi += '<td><select id="NDDauTu" class="form-control selectpicker" name="NDDauTu" data-live-search="true">';
        chuoi += '<option value="">-- Nội dung đầu tư --</option>';
        $.each(list_NDDauTu, (index, value) => {
            chuoi += '<option value=' + value.Code + '>' + value.Name + '</option>';
        });
        chuoi += '</select></td>';

        chuoi += '<td><input class="form-control" type="number" id="PTDauTu" name="PTDauTu" value=""></td>';
        chuoi += '<td><input class="form-control" type="number" id="GTDauTu" name="GTDauTu" value=""></td>';
        chuoi += '<td><input class="form-control" type="text" id="DieuKien" name="DieuKien" value=""></td>';

        chuoi += '<td><select id="DKDSTarget" class="form-control selectpicker" name="DKDSTarget" data-live-search="true">';
        chuoi += '<option value="">-- Điều kiện doanh số --</option>';
        $.each(list_DKDSTarget, (index, value) => {
            chuoi += '<option value=' + value.Code + '>' + value.Name + '</option>';
        });
        chuoi += '</select></td>';

        chuoi += '<td style="text-align:center;" class="btn_add1"><a class="add" href="javascript:void(0)" onclick="js_addTradeMark(' + CDFlashTrade + ');"><i class="fa fa-plus" aria-hidden="true"></i></a></td></tr > ';
        $("#table_trade tbody").append(chuoi);
        $('.selectpicker').selectpicker();
    }
    function deleteRow(r) {
        var ri = r.parentNode.parentNode.rowIndex;
        document.getElementById("table_thuong").deleteRow(ri);
    }
    function deleteRowTrade(s) {
        var ri = s.parentNode.parentNode.rowIndex;
        document.getElementById("table_trade").deleteRow(ri);
    }
    //function getTable_MuaBan() {
    //    SourceLineThuongMua = [];
    //    let trs = $("#table_thuong tbody tr");
    //    if (trs.length) {
    //        trs.each((index, tr) => {

    //            var i = "#table_thuong #" + i;
    //            let LoaiThuongCode = String($('#' + tr.id + ' select[name="LoaiThuong"]').val()).trim();
    //            //console.log(LoaiThuongCode);
    //            var LoaiThuong = String($('#table_thuong #' + tr.id + ' select[name="LoaiThuong"] option:selected').text()).trim();
    //            //console.log(LoaiThuong);

    //            let MucDSTu = String($('#' + tr.id + ' input[name="MucDSTu"]').val()).trim();
    //            let MucDSDen = String($('#' + tr.id + ' input[name="MucDSDen"]').val()).trim();

    //            let DKDSCode = String($('#' + tr.id  + ' select[name="DKDSTarget"]').val()).trim();
    //            var DKDSTarget = String($('#table_thuong #' + tr.id + ' select[name="DKDSTarget"] option:selected').text()).trim();
    //            //console.log(DKDSTarget);

    //            let DKDSTTCode = String($('#' + tr.id  + ' select[name="DKDSTinhThuong"]').val()).trim();
    //            var DKDSTinhThuong = String($('#table_thuong #' + tr.id + ' select[name="DKDSTinhThuong"] option:selected').text()).trim();
    //            //console.log(DKDSTinhThuong);

    //            let PTThuong = String($('#' + tr.id + ' input[name="PTThuong"]').val()).trim();
    //            let GiaTriThuong = String($('#' + tr.id + ' input[name="GTThuong"]').val()).trim();
    //            let GhiChu = String($('#' + tr.id + ' input[name="GhiChu"]').val()).trim();
    //            if (LoaiThuongCode.length > 0 || DKDSCode.length > 0 || MucDSTu.length > 0 || MucDSDen.length > 0 || DKDSTTCode.length > 0 || PTThuong.length > 0 || GiaTriThuong.length > 0 || GhiChu.length > 0) {
    //                SourceLineThuongMua.push({
    //                    "LoaiThuongCode": LoaiThuongCode,
    //                    "LoaiThuong": LoaiThuong,
    //                    "MucDSTu": MucDSTu,
    //                    "MucDSDen": MucDSDen,
    //                    "DKDSCode": DKDSCode,
    //                    "DKDSTarget": DKDSTarget,
    //                    "DKDSTTCode": DKDSTTCode,
    //                    "DKDSTinhThuong": DKDSTinhThuong,
    //                    "PTThuong": PTThuong,
    //                    "GiaTriThuong": GiaTriThuong,
    //                    "GhiChu": GhiChu,
    //                    //'type': '1'
    //                });
    //            }
    //        });
    //    }
    //    console.log(SourceLineThuongMua);

    //    SourceLineTradeMua = [];
    //    let trs1 = $("#table_trade tbody tr");
    //    if (trs1.length) {
    //        trs1.each((index, tr) => {

    //            let NDCode = String($('#' + tr.id + ' select[name="NDDauTu"]').val()).trim();
    //            var NDDauTu = String($('#table_trade #' + tr.id + ' select[name="NDDauTu"] option:selected').text()).trim();

    //            let PTDauTu = String($('#' + tr.id + ' input[name="PTDauTu"]').val()).trim();
    //            let GiaTriDT = String($('#' + tr.id + ' input[name="GTDauTu"]').val()).trim();
    //            let DieuKien = String($('#' + tr.id + ' input[name="DieuKien"]').val()).trim();

    //            let DKDoanhSoCode = String($('#' + tr.id + ' select[name="DKDSTarget"]').val()).trim();
    //            var DKDoanhSo = String($('#table_trade #' + tr.id + ' select[name="DKDSTarget"] option:selected').text()).trim();
                
    //            if (NDCode.length > 0 || PTDauTu.length > 0 || GiaTriDT.length > 0 || DieuKien.length > 0 || DKDoanhSoCode.length > 0 ) {
    //                SourceLineTradeMua.push({
    //                    "NDCode": NDCode,
    //                    "NDDauTu": NDDauTu,
    //                    "PTDauTu": PTDauTu,
    //                    "GiaTriDT": GiaTriDT,
    //                    "DieuKien": DieuKien,
    //                    "DKDoanhSoCode": DKDoanhSoCode,
    //                    "DKDoanhSo": DKDoanhSo,
    //                    //'type': '1'
    //                });
    //            }
    //        });
    //    }
    //    console.log(SourceLineTradeMua);
    //    SourceLineCKMua = [];
    //    let trs2 = $("#table_chietkhau tbody tr");
    //    if (trs2.length != 0) {
    //        trs2.each((index, tr) => {

    //            let LoaiCK = String($('#table_chietkhau #' + tr.id + ' select[name="typeDiscount"] option:selected').text()).trim();
    //            let HinhThucTT = String($('#table_chietkhau #' + tr.id + ' select[name="HinhThucThanhToan"] option:selected').text()).trim();
    //            let GiaTriCK = String($('#' + tr.id + ' input[name="discountAmount"]').val()).trim();
    //            let PTCK = String($('#' + tr.id + ' input[name="percent_Discount"]').val()).trim();
    //            let GiaTriDHTD = String($('#' + tr.id + ' input[name="OrderValue"]').val()).trim();
    //            if (GiaTriCK.length > 0 || PTCK.length > 0 || GiaTriDHTD.length > 0 ) {
    //                SourceLineCKMua.push({
    //                    "LoaiCK": LoaiCK,
    //                    "HinhThucTT": HinhThucTT,
    //                    "GiaTriCK": GiaTriCK,
    //                    "PTCK": PTCK,
    //                    "GiaTriDHTD": GiaTriDHTD,
    //                    //'type': '1'
    //                });
    //            }
    //        });
    //    }
    //    console.log(SourceLineCKMua);
    //    SourceLineHTHMua = [];
    //    let trs3 = $("#table_hangtang tbody tr");
    //    if (trs3.length != 0) {
    //        trs3.each((index, tr) => {
    //            let SLMua = String($('#' + tr.id + ' input[name="quantityBuy"]').val()).trim();
    //            let SlTang = String($('#' + tr.id + ' input[name="orderQuantity"]').val()).trim();
    //            if (SLMua.length > 0 || SlTang.length > 0 ) {
    //                SourceLineHTHMua.push({
    //                    "SLMua": SLMua,
    //                    "SlTang": SlTang,
    //                    //'type': '1'
    //                });
    //            }
    //        });
    //    }
    //    console.log(SourceLineHTHMua);
    //}
</script>